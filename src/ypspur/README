## ypspur

YP-Spur
Yamabico Project - Spur

ISS	のプログラムをベースにTKUに開発されたSH-Spurをもとに開発

以下は ISS の引き継ぎ資料。

////////////////////////////////////////////////////////////
    SH2を用いて実験を行った際のプログラム、実験データ集
                     2007.3.21 ISS
////////////////////////////////////////////////////////////

○データ、プログラム内容
・main.c          ： メイン関数
・sh7040s.h       ： アドレス定義
・sh_7045.h       ： SCI,CMTに関するの関数群
・define.h        ： 定数の定義、グローバル変数の宣言
・isincos.h       ： sin,cosの計算をテーブル参照で計算するための関数郡
・isincos/        ： 上記を行うために使用したプログラム
・isintable.h     ： 0〜90°までの32768倍されたsinのテーブル
                     360°を65536としている。
・motor_control.h ： モータ回転数制御をするための関数郡
・odometry.h      ： オドメトリをとるための関数郡
・following.h     ： 経路追従、目標点移動をするための関数郡
・demo.h          ： デモ用関数
・SCI.h           ： シリアル通信をするための関数郡


・sh7045rom.x     ： リンカスクリプト
                     機械語のプログラムやデータの配置
                    （どこのアドレスに配置するか）を決める。
                     DTCの定義はこの辺で行っている。
・startup.s       ： スタートアップルーチン
                     外付けカウンタの設定をここで行う。


・sh2.mot         ： SH2へ書き込む実行ファイル
・put_data/       ： ロボット１〜４に書き込むそれぞれの実行ファイル


・test/　　　　　 ： デバッグのためのプログラム
    counter.mot   ： ４チャンネルのエンコーダカウンタ値を表示
    pwmtest.mot　 ： ４チャンネルのモータに0〜1000のPWM比を与える
    sciout.mot　　： シリアル通信の確認、勉強用

・sh7045writer　　： SH2にmotファイルを書き込むコマンド


○開発環境
秋月 SH2/7045F ボードに付属のCDよりインストール。
 sh-coff-gcc
 sh-coff-objcopy
（かそれと同等なもの）が使えるようになれば大丈夫なはず。

書き込みは同CDに h8write が入っているが、sh7045writer を用いた方が断然早い。

